---
import AdminLayout from "../../layouts/AdminLayout.astro";
import { getMyRestaurant } from "../../services/api";

const restaurant = await getMyRestaurant();
---

<AdminLayout title="Ajustes del Restaurante">
  <h1 class="font-heading text-4xl font-bold mb-8">Ajustes del Restaurante</h1>
  <div class="max-w-2xl mx-auto bg-surface p-8 rounded-lg shadow-lg">
    <form id="settings-form" class="space-y-6">
      <!-- Vista previa del logo -->
      <div class="flex flex-col items-center space-y-4">
        <img
          id="logo-preview"
          src={restaurant.logoUrl || "/placeholder-image.jpg"}
          alt="Logo actual"
          class="w-32 h-32 rounded-full object-cover border-4 border-accent"
        />
        <input
          type="file"
          id="logo-upload"
          name="logoFile"
          accept="image/*"
          class="text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-accent file:text-white hover:file:bg-opacity-80"
        />
      </div>

      <div>
        <label
          for="name"
          class="block text-sm font-medium text-text-secondary mb-2"
          >Nombre del Restaurante</label
        >
        <input
          type="text"
          id="name"
          name="name"
          value={restaurant.name}
          required
          class="w-full bg-background ..."
        />
      </div>

      <div>
        <label
          for="brandingColor"
          class="block text-sm font-medium text-text-secondary mb-2"
          >Color de la Marca</label
        >
        <input
          type="color"
          id="brandingColor"
          name="brandingColor"
          value={restaurant.brandingColor || "#E55959"}
          class="w-full h-12 p-1 bg-background ..."
        />
      </div>

      <button type="submit" class="w-full bg-accent text-white ..."
        >Guardar Cambios</button
      >
    </form>
    <div id="form-message" class="mt-4 text-center"></div>
  </div>
</AdminLayout>
<script src="../../scripts/settings-form.ts"></script>
